<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>tell::db::Transaction Class Reference$</title>
        <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
        <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.css">
        <link rel="stylesheet" href="/css/default.css">
        <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
        <script>
            var isLanding = false;
            var menu = 'API Documentation';
        </script>
<title>Tell: tell::db::Transaction Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body id="tell">
        <div class="header">
            <div class="home-menu pure-menu pure-menu-horizontal pure-menu-fixed">
                <ul id="menu" class="pure-menu-list">
                </ul>
                <a class="pure-menu-heading"><img class="img-header" src="/images/tell-black.png"/></a>
            </div>
        </div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tell
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">A shared-data database ecosystem</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classtell_1_1db_1_1_transaction.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classtell_1_1db_1_1_transaction-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tell::db::Transaction Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_transaction_8hpp_source.html">Transaction.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae1097f2b50ac81c8785b91d3d511bb8c"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#ae1097f2b50ac81c8785b91d3d511bb8c">ChunkString</a> = <a class="el" href="classcrossbow_1_1basic__string.html">crossbow::basic_string</a>&lt; char, std::char_traits&lt; char &gt;, <a class="el" href="classcrossbow_1_1_chunk_allocator.html">crossbow::ChunkAllocator</a>&lt; char &gt;&gt;</td></tr>
<tr class="separator:ae1097f2b50ac81c8785b91d3d511bb8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a93b90e7f30fc63e9ff8bfde7e89f6335"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#a93b90e7f30fc63e9ff8bfde7e89f6335">Transaction</a> (tell::store::ClientHandle &amp;handle, tell::store::ClientTransaction &amp;tx, <a class="el" href="structtell_1_1db_1_1impl_1_1_tell_d_b_context.html">impl::TellDBContext</a> &amp;context, tell::store::TransactionType type)</td></tr>
<tr class="separator:a93b90e7f30fc63e9ff8bfde7e89f6335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4275a3cca49973823438cad0d39d039"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#ac4275a3cca49973823438cad0d39d039">~Transaction</a> ()</td></tr>
<tr class="separator:ac4275a3cca49973823438cad0d39d039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c061a45baa5e3635aa9a77369ec29c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtell_1_1db_1_1_future.html">Future</a>&lt; <a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#a29c061a45baa5e3635aa9a77369ec29c">openTable</a> (const <a class="el" href="namespacecrossbow.html#a856153aee2215c5e8d318f66d38c9653">crossbow::string</a> &amp;name)</td></tr>
<tr class="memdesc:a29c061a45baa5e3635aa9a77369ec29c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the table, gets the schema and prepares the caches.  <a href="#a29c061a45baa5e3635aa9a77369ec29c">More...</a><br /></td></tr>
<tr class="separator:a29c061a45baa5e3635aa9a77369ec29c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c6fdabf1260aaf24445a55a22095d55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#a0c6fdabf1260aaf24445a55a22095d55">createTable</a> (const <a class="el" href="namespacecrossbow.html#a856153aee2215c5e8d318f66d38c9653">crossbow::string</a> &amp;name, const store::Schema &amp;schema)</td></tr>
<tr class="memdesc:a0c6fdabf1260aaf24445a55a22095d55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new table with the given schema.  <a href="#a0c6fdabf1260aaf24445a55a22095d55">More...</a><br /></td></tr>
<tr class="separator:a0c6fdabf1260aaf24445a55a22095d55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c22a1587a0e68f1c1bfd957c2c9e84e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtell_1_1db_1_1_future.html">Future</a>&lt; <a class="el" href="classtell_1_1db_1_1_tuple.html">Tuple</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#a8c22a1587a0e68f1c1bfd957c2c9e84e">get</a> (<a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a> tableId, <a class="el" href="structtell_1_1db_1_1key__t.html">key_t</a> key)</td></tr>
<tr class="memdesc:a8c22a1587a0e68f1c1bfd957c2c9e84e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a tuple from the storage.  <a href="#a8c22a1587a0e68f1c1bfd957c2c9e84e">More...</a><br /></td></tr>
<tr class="separator:a8c22a1587a0e68f1c1bfd957c2c9e84e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd4dbc75f6668264ce5a0610cd2459e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtell_1_1db_1_1_iterator.html">Iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#a3cd4dbc75f6668264ce5a0610cd2459e">lower_bound</a> (<a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a> tableId, const <a class="el" href="namespacecrossbow.html#a856153aee2215c5e8d318f66d38c9653">crossbow::string</a> &amp;idxName, const <a class="el" href="namespacetell_1_1db.html#a093376f12da61ff53f0caf7949c2f0f5">KeyType</a> &amp;key)</td></tr>
<tr class="separator:a3cd4dbc75f6668264ce5a0610cd2459e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacd78fb0d35daf4fca14dd5472e6f1f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtell_1_1db_1_1_iterator.html">Iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#aacd78fb0d35daf4fca14dd5472e6f1f6">reverse_lower_bound</a> (<a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a> tableId, const <a class="el" href="namespacecrossbow.html#a856153aee2215c5e8d318f66d38c9653">crossbow::string</a> &amp;idxName, const <a class="el" href="namespacetell_1_1db.html#a093376f12da61ff53f0caf7949c2f0f5">KeyType</a> &amp;key)</td></tr>
<tr class="separator:aacd78fb0d35daf4fca14dd5472e6f1f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae781dbd2e288ff50d723b58156de06a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#ae781dbd2e288ff50d723b58156de06a2">insert</a> (<a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a> table, <a class="el" href="structtell_1_1db_1_1key__t.html">key_t</a> key, const <a class="el" href="classtell_1_1db_1_1_tuple.html">Tuple</a> &amp;tuple)</td></tr>
<tr class="memdesc:ae781dbd2e288ff50d723b58156de06a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a new tuple.  <a href="#ae781dbd2e288ff50d723b58156de06a2">More...</a><br /></td></tr>
<tr class="separator:ae781dbd2e288ff50d723b58156de06a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b6e252c197a13c247418536934da459"><td class="memTemplParams" colspan="2">template&lt;class... T&gt; </td></tr>
<tr class="memitem:a0b6e252c197a13c247418536934da459"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#a0b6e252c197a13c247418536934da459">insert</a> (<a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a> table, <a class="el" href="structtell_1_1db_1_1key__t.html">key_t</a> key, const std::tuple&lt; T... &gt; &amp;tuple)</td></tr>
<tr class="separator:a0b6e252c197a13c247418536934da459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7bd51f44897c5f4e08c05bbf64b2128"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#aa7bd51f44897c5f4e08c05bbf64b2128">update</a> (<a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a> table, <a class="el" href="structtell_1_1db_1_1key__t.html">key_t</a> key, const <a class="el" href="classtell_1_1db_1_1_tuple.html">Tuple</a> &amp;from, const <a class="el" href="classtell_1_1db_1_1_tuple.html">Tuple</a> &amp;to)</td></tr>
<tr class="memdesc:aa7bd51f44897c5f4e08c05bbf64b2128"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates a tuple.  <a href="#aa7bd51f44897c5f4e08c05bbf64b2128">More...</a><br /></td></tr>
<tr class="separator:aa7bd51f44897c5f4e08c05bbf64b2128"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaef311c733dc91790f92e7b152e029b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#adaef311c733dc91790f92e7b152e029b">remove</a> (<a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a> table, <a class="el" href="structtell_1_1db_1_1key__t.html">key_t</a> key, const <a class="el" href="classtell_1_1db_1_1_tuple.html">Tuple</a> &amp;tuple)</td></tr>
<tr class="memdesc:adaef311c733dc91790f92e7b152e029b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a tuple.  <a href="#adaef311c733dc91790f92e7b152e029b">More...</a><br /></td></tr>
<tr class="separator:adaef311c733dc91790f92e7b152e029b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedaf5f70c4db77b5144477c5b7cace06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#aedaf5f70c4db77b5144477c5b7cace06">rollback</a> ()</td></tr>
<tr class="memdesc:aedaf5f70c4db77b5144477c5b7cace06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aborts the current transaction.  <a href="#aedaf5f70c4db77b5144477c5b7cace06">More...</a><br /></td></tr>
<tr class="separator:aedaf5f70c4db77b5144477c5b7cace06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19cbd583583540d1fd10001f16a126e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#a19cbd583583540d1fd10001f16a126e0">commit</a> ()</td></tr>
<tr class="memdesc:a19cbd583583540d1fd10001f16a126e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Commits the transaction.  <a href="#a19cbd583583540d1fd10001f16a126e0">More...</a><br /></td></tr>
<tr class="separator:a19cbd583583540d1fd10001f16a126e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a257dde0ed7ba5e068eb58bbc2dbf93cf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcrossbow_1_1_chunk_memory_pool.html">crossbow::ChunkMemoryPool</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtell_1_1db_1_1_transaction.html#a257dde0ed7ba5e068eb58bbc2dbf93cf">pool</a> ()</td></tr>
<tr class="memdesc:a257dde0ed7ba5e068eb58bbc2dbf93cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the memory pool of this transaction.  <a href="#a257dde0ed7ba5e068eb58bbc2dbf93cf">More...</a><br /></td></tr>
<tr class="separator:a257dde0ed7ba5e068eb58bbc2dbf93cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_transaction_8hpp_source.html#l00152">152</a> of file <a class="el" href="_transaction_8hpp_source.html">Transaction.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ae1097f2b50ac81c8785b91d3d511bb8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classtell_1_1db_1_1_transaction.html#ae1097f2b50ac81c8785b91d3d511bb8c">tell::db::Transaction::ChunkString</a> =  <a class="el" href="classcrossbow_1_1basic__string.html">crossbow::basic_string</a>&lt;char, std::char_traits&lt;char&gt;, <a class="el" href="classcrossbow_1_1_chunk_allocator.html">crossbow::ChunkAllocator</a>&lt;char&gt;&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A string which has a life time equal to the lifetime of the transaction </p>

<p>Definition at line <a class="el" href="_transaction_8hpp_source.html#l00157">157</a> of file <a class="el" href="_transaction_8hpp_source.html">Transaction.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a93b90e7f30fc63e9ff8bfde7e89f6335"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tell::db::Transaction::Transaction </td>
          <td>(</td>
          <td class="paramtype">tell::store::ClientHandle &amp;&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tell::store::ClientTransaction &amp;&#160;</td>
          <td class="paramname"><em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1impl_1_1_tell_d_b_context.html">impl::TellDBContext</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tell::store::TransactionType&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac4275a3cca49973823438cad0d39d039"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tell::db::Transaction::~Transaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a19cbd583583540d1fd10001f16a126e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tell::db::Transaction::commit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Commits the transaction. </p>
<p>This tries to commit the transaction. A commit might fail if there is a write-write conflict with another transaction.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classtell_1_1db_1_1_conflict.html">Conflict</a></td><td>if a conflict gets detected. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0c6fdabf1260aaf24445a55a22095d55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a> tell::db::Transaction::createTable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacecrossbow.html#a856153aee2215c5e8d318f66d38c9653">crossbow::string</a> &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const store::Schema &amp;&#160;</td>
          <td class="paramname"><em>schema</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new table with the given schema. </p>
<p>This creates a new table with the given schema. It is important, that tables get created with this method. Do not use the lower level TellStore interface to do this! This interface will also create the tables necassary to store the indexes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the table </td></tr>
    <tr><td class="paramname">schema</td><td>The table schema and the indexes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8c22a1587a0e68f1c1bfd957c2c9e84e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtell_1_1db_1_1_future.html">Future</a>&lt;<a class="el" href="classtell_1_1db_1_1_tuple.html">Tuple</a>&gt; tell::db::Transaction::get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a>&#160;</td>
          <td class="paramname"><em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1key__t.html">key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a tuple from the storage. </p>
<p>This will get a tuple with a given key and table id from the storage. This function returns a future, which means that it returns immediately but the user can wait on it for the result. If the tuple is cached, this function will return immediately.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>The table id </td></tr>
    <tr><td class="paramname">key</td><td>The key of the tuple </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A future holding the result </dd></dl>

</div>
</div>
<a class="anchor" id="ae781dbd2e288ff50d723b58156de06a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tell::db::Transaction::insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a>&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1key__t.html">key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtell_1_1db_1_1_tuple.html">Tuple</a> &amp;&#160;</td>
          <td class="paramname"><em>tuple</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inserts a new tuple. </p>
<p>This will insert a new tuple into the storage. In praxis, this will only write into the local cache, so no communication with the storage does happen here. Furthermore, only basic conflict detection will happen. It will only check whether the given key already exists in the local cache, in which case it will throw an exception. Otherwise, conflict detection will occur during the commit phase.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>The table id </td></tr>
    <tr><td class="paramname">key</td><td>The key of the tuple </td></tr>
    <tr><td class="paramname">tuple</td><td>The tuple to insert </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classtell_1_1db_1_1_tuple_exists_exception.html">TupleExistsException</a></td><td>If the key is already in the local cache. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0b6e252c197a13c247418536934da459"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class... T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void tell::db::Transaction::insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a>&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1key__t.html">key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::tuple&lt; T... &gt; &amp;&#160;</td>
          <td class="paramname"><em>tuple</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_transaction_8hpp_source.html#l00335">335</a> of file <a class="el" href="_transaction_8hpp_source.html">Transaction.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3cd4dbc75f6668264ce5a0610cd2459e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtell_1_1db_1_1_iterator.html">Iterator</a> tell::db::Transaction::lower_bound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a>&#160;</td>
          <td class="paramname"><em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacecrossbow.html#a856153aee2215c5e8d318f66d38c9653">crossbow::string</a> &amp;&#160;</td>
          <td class="paramname"><em>idxName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacetell_1_1db.html#a093376f12da61ff53f0caf7949c2f0f5">KeyType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a29c061a45baa5e3635aa9a77369ec29c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtell_1_1db_1_1_future.html">Future</a>&lt;<a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a>&gt; tell::db::Transaction::openTable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacecrossbow.html#a856153aee2215c5e8d318f66d38c9653">crossbow::string</a> &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the table, gets the schema and prepares the caches. </p>
<dl class="section return"><dt>Returns</dt><dd>A future to the table id.</dd></dl>
<p>This function will prepare the usage of the given table within this transaction. If the table has not been opened before, it will send a request to the storage to get the schema and the table id. Otherwise it will just return the table id. </p>

</div>
</div>
<a class="anchor" id="a257dde0ed7ba5e068eb58bbc2dbf93cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcrossbow_1_1_chunk_memory_pool.html">crossbow::ChunkMemoryPool</a>&amp; tell::db::Transaction::pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the memory pool of this transaction. </p>
<p>TellDB transactions make use of the fact that transactions have a limited run time. Therefore they use ChunkAllocators to allocate and deallocate memory. A ChunkAllocator allocates memory block-wise and then gives out chunks of memory from these blocks. Therefore allocations on the heap get nearly as cheap as stack allocations. Deleting an object allocated from this pool does not have any effects. As soon as the transaction gets destroyed, all memory from this pool gets freed.</p>
<p>The user can use the same pool to allocate objects and bind the object lifetime to the lifetime of the transaction. This should be done carefully, as using it incorrectly might lead to memory errors. </p>

</div>
</div>
<a class="anchor" id="adaef311c733dc91790f92e7b152e029b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tell::db::Transaction::remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a>&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1key__t.html">key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtell_1_1db_1_1_tuple.html">Tuple</a> &amp;&#160;</td>
          <td class="paramname"><em>tuple</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a tuple. </p>
<p>This will delete an existing tuple. In praxis, this will only write into the local cache, so no communication with the storage does happen here. Furthermore, only basic conflict detection will happen. It will only check whether the given key already exists in the local cache, in which case it will check whether the last read did return the newest version. If this is not the case, we already know that a conflict occurred and the function will throw an exception. Otherwise, conflict detection will occur during the commit phase.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>The table id </td></tr>
    <tr><td class="paramname">key</td><td>The key of the tuple </td></tr>
    <tr><td class="paramname">tuple</td><td>The tuple to delete </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classtell_1_1db_1_1_conflict.html">Conflict</a></td><td>If a conflict is detected. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aacd78fb0d35daf4fca14dd5472e6f1f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtell_1_1db_1_1_iterator.html">Iterator</a> tell::db::Transaction::reverse_lower_bound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a>&#160;</td>
          <td class="paramname"><em>tableId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacecrossbow.html#a856153aee2215c5e8d318f66d38c9653">crossbow::string</a> &amp;&#160;</td>
          <td class="paramname"><em>idxName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacetell_1_1db.html#a093376f12da61ff53f0caf7949c2f0f5">KeyType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aedaf5f70c4db77b5144477c5b7cace06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tell::db::Transaction::rollback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Aborts the current transaction. </p>
<p>This will abort the current transaction and will delete the state of the current transaction. After a call to rollback it is illegal to call any functions on the transaction object again. </p>

</div>
</div>
<a class="anchor" id="aa7bd51f44897c5f4e08c05bbf64b2128"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tell::db::Transaction::update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1table__t.html">table_t</a>&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtell_1_1db_1_1key__t.html">key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtell_1_1db_1_1_tuple.html">Tuple</a> &amp;&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtell_1_1db_1_1_tuple.html">Tuple</a> &amp;&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates a tuple. </p>
<p>This will update an existing tuple into the storage. In praxis, this will only write into the local cache, so no communication with the storage does happen here. Furthermore, only basic conflict detection will happen. It will only check whether the given key already exists in the local cache, in which case it will check whether the last read did return the newest version. If this is not the case, we already know that a conflict occurred and the function will throw an exception. Otherwise, conflict detection will occur during the commit phase.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>The table id </td></tr>
    <tr><td class="paramname">key</td><td>The key of the tuple </td></tr>
    <tr><td class="paramname">from</td><td>The current version of the tuple </td></tr>
    <tr><td class="paramname">to</td><td>The new version of the tuple </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classtell_1_1db_1_1_conflict.html">Conflict</a></td><td>If a conflict is detected. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/mpilman/eth/tell/telldb/telldb/<a class="el" href="_transaction_8hpp_source.html">Transaction.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetell.html">tell</a></li><li class="navelem"><a class="el" href="namespacetell_1_1db.html">db</a></li><li class="navelem"><a class="el" href="classtell_1_1db_1_1_transaction.html">Transaction</a></li>
  </ul>
</div>
<script src="/js/load-menu.js"></script>
</body>
</html>
